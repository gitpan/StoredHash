<html><head><title>StoredHash::ISA</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="http://search.cpan.org/s/style.css">

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Sat Dec 20 17:33:48 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#my_(%24id)_%3D_%24e-%3Einsert(%25opts)'>my ($id) = $e-&#62;insert(%opts)</a>
    <li class='indexItem indexItem2'><a href='#%24entry-%3Eupdate(%24ids)'>$entry-&#62;update($ids)</a>
    <li class='indexItem indexItem2'><a href='#%24entry-%3Edelete(%24ids)'>$entry-&#62;delete($ids)</a>
    <li class='indexItem indexItem2'><a href='#%24e_%3D_MyType-%3Eload(%24ids)'>$e = MyType-&#62;load($ids)</a>
    <li class='indexItem indexItem2'><a href='#%24e-%3Ereload(%24ids)'>$e-&#62;reload($ids)</a>
    <li class='indexItem indexItem2'><a href='#MyType-%3Eloadset(%24filter%2C_%24sortattrs%2C_%25opts)'>MyType-&#62;loadset($filter, $sortattrs, %opts)</a>
    <li class='indexItem indexItem2'><a href='#MyType-%3Eexists(%24ids)'>MyType-&#62;exists($ids)</a>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>StoredHash::ISA - Allow Object to be-a StoredHash by automatically inheriting persistence abilities.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>StoredHash::ISA allows to create an IS-A (ISA in Perl lingo) relationship between any object class and StoredHash persister.
This allows you to call StoredHash methods directly via instance (or as Class methods where appropriate).</p>

<p>Because StoredHash::ISA bases persistence operations on class introspection,
the persisted objects must belong to a class package and not be &#34;plain&#34; HASHes (You&#39;d use StoredHash).
Even when some methods are overloaded to work as Instance or class methods,
the Objects must be blessed.</p>

<p>Using StoredHash::ISA as a base class allows you to use following persistence methods</p>

<ul>
<li>insert() - as instance method</li>

<li>update() - as instance method</li>

<li>load() - as class method</li>

<li>loadset() - as class method</li>

<li>delete() - as instance method - or class method</li>

<li>exists() - as class method</li>

<li>reload() - StoredHash::ISA custom instance method to reload instance from db</li>
</ul>

<p>The ways of using methods (class vs.
instance) above.
Perl generally allows class methods (i.e.
non-instance methods) to be called with two syntaxes (with major underlying differences):</p>

<pre>   ThePack::a_method()
   # And
   ThePack-&#62; a_method()</pre>

<p>All StoredHash::ISA class methods (as listed above) need to be called using ThePack-&#62; a_method() (this is related to giving framework a hint about objects type).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>Package wanting to be-a persister:</p>

<pre>   {
     package Justanother::Object;
     # Inherit persister methods
     # our @ISA = (&#39;StoredHash::ISA&#39;); # Or more by more modern style ...
     use base (&#39;StoredHash::ISA&#39;);
     # Must declare 
     our $shp = {&#39;table&#39; =&#62; &#39;another&#39;, &#39;pkey&#39; =&#62; [&#39;id&#39;], &#39;autoid&#39; =&#62; 1,}
     # Custom functionality ... methods as usual
     
   }</pre>

<p>using the class ...</p>

<pre>   my $o = Justanother::Object-&#62;new(&#39;prop&#39; =&#62; &#39;The Value&#39;,);
   my $id = $o-&#62;insert();
   
   # Load object
   my $o = Justanother::Object-&#62;load([46]);
   # Load related children (blessed automatically)
   my $o-&#62;{&#39;items&#39;} = Justanother::Object::Children-&#62;loadset({&#39;parent&#39; =&#62; 46});
   
   # Setting up Your inheriting class-package for persistence
   {
     package Justanother::Object;
   
     our $shp = {&#39;table&#39; =&#62; &#39;anotherobj&#39;, ...};
     use base &#39;StoredHash::ISA&#39;; # Same as our @ISA = (&#39;StoredHash::ISA&#39;);
   }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<p>Implementations as distinct instance methods</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="my_($id)_=_$e-&#62;insert(%opts)"
>my ($id) = $e-&#62;insert(%opts)</a></h2>

<p>Insert an instance of a class to database. Return id(s) as a array / list (real array that is).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$entry-&#62;update($ids)"
>$entry-&#62;update($ids)</a></h2>

<p>Update entry in database. Allows using explicit &#39;attrs&#39; to minimize attributes to be updated. Return true value on success. Throw exception on failure.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$entry-&#62;delete($ids)"
>$entry-&#62;delete($ids)</a></h2>

<p>Delete an instance of an entry from DB. Note that as the persisted version ceases to exist, probably the runtime instance should as well.</p>

<pre>   $entry-&#62;delete($ids)
   undef($entry);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$e_=_MyType-&#62;load($ids)"
>$e = MyType-&#62;load($ids)</a></h2>

<p>Class Method to load an entry of particular type from DB. Return (blessed) entry.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$e-&#62;reload($ids)"
>$e-&#62;reload($ids)</a></h2>

<p>Reload entry instance from database. $ids is optional as long as entry contains the id attribute values. Return (blessed) entry.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="MyType-&#62;loadset($filter,_$sortattrs,_%opts)"
>MyType-&#62;loadset($filter, $sortattrs, %opts)</a></h2>

<p>Class method to load a set of entries for a class from the database.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="MyType-&#62;exists($ids)"
>MyType-&#62;exists($ids)</a></h2>

<p>Class method to test if an instance exists in database. Return true for &#34;does exist&#34;, false for &#34;not&#34;.</p>

<!-- end doc -->

</body></html>
