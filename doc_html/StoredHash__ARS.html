<html><head><title>StoredHash::ARS</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" type="text/css" title="pod_stylesheet" href="http://search.cpan.org/s/style.css">

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.16,
  using Pod::Simple::PullParser v3.16,
  under Perl v5.014002 at Sat Dec 20 17:33:48 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#SYNOPSIS'>SYNOPSIS</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#StoredHash%3A%3AARS-%3Enew(%25opts)'>StoredHash::ARS-&#62;new(%opts)</a>
    <li class='indexItem indexItem2'><a href='#%24shp-%3Einsert(%24e)%3B'>$shp-&#62;insert($e);</a>
    <li class='indexItem indexItem2'><a href='#%24shp-%3Eupdate(%24e%2C_%5B%24eid%5D%2C_%25opts)'>$shp-&#62;update($e, [$eid], %opts)</a>
    <li class='indexItem indexItem2'><a href='#%24shp-%3Edelete(%5B%24eid%5D)'>$shp-&#62;delete([$eid])</a>
    <li class='indexItem indexItem2'><a href='#%24shp-%3Eexists(%5B%24eid%5D)'>$shp-&#62;exists([$eid])</a>
    <li class='indexItem indexItem2'><a href='#%24shp-%3Eload(%5B%24eid%5D%2C_%25opts)'>$shp-&#62;load([$eid], %opts)</a>
    <li class='indexItem indexItem2'><a href='#%24shp-%3Eloadset(%24filter%2C_%24sortby%2C_%25opts)'>$shp-&#62;loadset($filter, $sortby, %opts)</a>
    <li class='indexItem indexItem2'><a href='#%24shp-%3Ecols()'>$shp-&#62;cols()</a>
  </ul>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>StoredHash::ARS - Remedy/ARS adapter for StoredHash</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>StoredHash::ARS allows the normal persistence methods of StoredHash to be used with Remedy ARS database backend (with few exceptions where certain method would not make sense).</p>

<p>ARS is much more constrained about DB side conventions than traditional relational databases.
ID numbering is always automatic and primary key is always field called (actually numbered as ARS uses numbers for attribute names) &#39;1&#39;.</p>

<p>To learn to use StoredHash::ARS,
read &#34;perldoc StoredHash&#34;.
The documentation here focuses only on ARS / Remedy specific quirks.</p>

<p>NOTE: This module is still experimental.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h2>

<pre>   use StoredHash::ARS;
   use ARS;
   
   # ARS Connection
   my $ctrl = ars_Login($ENV{&#39;ARS_SERVER&#39;}, $ENV{&#39;ARS_USER&#39;}, $ENV{&#39;ARS_PASS&#39;});
   # StoredHash persister configuration (&#39;pkey&#39; intentionally missing for ARS)
   my $shpc = {&#39;table&#39; =&#62; &#39;HPD::Helpdesk&#39;,  &#39;dbh&#39; =&#62; $ctrl, &#39;debug&#39; =&#62; 0};
   my $shp = StoredHash::ARS-&#62;new(%$shpc);
   # Load
   my hdent = $shp-&#62;load([&#39;HD...&#39;]);
   # Insert, Update, Delete ... as usual</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<p>Method documentation focuses only on ASR specific differences. Be sure to read StoredHash documentation for an overview.</p>

<p>General notes:</p>

<ul>
<li>The hash to store must be keyed by Remedy field numbers (not descriptibve names ...)</li>

<li>On update, delete ... ops that require entry id to be passed, use the value assigned to Remedy field &#39;1&#39; (reserved for id of an entry by Remedy conventions).</li>

<li>StoredHash basic / DBI backend will tolerate calling methods via persister that does not have the connection (&#39;dbh&#39;) set. StoredHash::ARS will not.</li>

<li>Because of no composite keys in ARS, the StoredHash::ARS persistnce methods will tolarate a loose / forging way of passing id:s as plain scalars, with &#34;wrapping&#34; array being optional. However using array(ref) is still the recommended, future-proof way of passing the id.</li>

<li>Remedy schemas usually host a huge amount of attributes. For this reason you should focus on using parameter &#39;attrs&#39; in your persistence operations for optimal performance.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="StoredHash::ARS-&#62;new(%opts)"
>StoredHash::ARS-&#62;new(%opts)</a></h2>

<p>StoredHash::ARS constructor. Notes on keyword parameters (in %opts).</p>

<ul>
<li>&#39;dbh&#39; - The connection passed should be ARS Connection (use ARS API idiomatic handle $ctrl as value).</li>

<li>&#39;table&#39; - use ARS Schema name (e.g. &#39;table&#39; =&#62; &#39;HPD:HelpDesk&#39;)</li>
</ul>

<p>Because Remedy always uses the same numeric name for primary key and auto-allocates id, the parameters &#39;pkeys&#39; and &#39;autoid&#39; are not relevant for Remedy.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$shp-&#62;insert($e);"
>$shp-&#62;insert($e);</a></h2>

<p>Insert an entry into ARS database. Pass ARS Entry instance ($e) with NUMERIC Field IDs (i.e. not descriptive field names).</p>

<pre>    $e = {&#39;240000005&#39; =&#62; &#39;mrjohnsmith&#39;, &#39;260000002&#39; =&#62; &#39;mrjohnsmith@corp.com&#39;};
    my $eid = $sp-&#62;insert($e);</pre>

<p>Return Remedy entry ID for the new entry (usable in further persistence ops).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$shp-&#62;update($e,_[$eid],_%opts)"
>$shp-&#62;update($e, [$eid], %opts)</a></h2>

<p>Update entry in ARS database schema. Keyword params in %opts:</p>

<ul>
<li>&#39;attrs&#39; - Allow only a subset of attributes from entry ($e) to be updated.</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$shp-&#62;delete([$eid])"
>$shp-&#62;delete([$eid])</a></h2>

<p>Delete an Entry by id ($eid) permanently from ARS database.</p>

<p>Return true value for successesful deletion.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$shp-&#62;exists([$eid])"
>$shp-&#62;exists([$eid])</a></h2>

<p>Test presence of entry by ID ($eid) in ARS database. Return true for present in DB, false for not present.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$shp-&#62;load([$eid],_%opts)"
>$shp-&#62;load([$eid], %opts)</a></h2>

<p>Load an entry from Remedy database schema by its id ($eid). Keyword params in %opts:</p>

<ul>
<li>&#39;attrs&#39; - Load only attributes listed (arrayref, pass numeric field IDs)</li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$shp-&#62;loadset($filter,_$sortby,_%opts)"
>$shp-&#62;loadset($filter, $sortby, %opts)</a></h2>

<p>Keyword parameters (in %opts):</p>

<ul>
<li>&#39;attrs&#39; - if set to true scalar value, the entries are fetched brute force with all entry attributes (in Remedy this usually is a LOT of data).</li>

<li></li>
</ul>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="$shp-&#62;cols()"
>$shp-&#62;cols()</a></h2>

<p>Query columns for ARS Schema (given by persister internal field &#39;table&#39; passed at construction time). Return numeric fieldnames sorted alphabetically (as ARS does not have deterministic order for fields).</p>

<!-- end doc -->

</body></html>
